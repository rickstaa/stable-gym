<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>QuadXHoverCost gymnasium environment &mdash; Stable Gym 0.20.7 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css?v=eafc0fe6" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/modify.css?v=519ed47b" />

  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js?v=068042d4"></script>
        <script src="../../_static/doctools.js?v=888ff710"></script>
        <script src="../../_static/sphinx_highlight.js?v=4825356b"></script>
        <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
        <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="QuadXTrackingCost gymnasium environment" href="quadx_tracking_cost.html" />
    <link rel="prev" title="MinitaurBulletCost gymnasium environment" href="minitaur_bullet_cost.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html">
            
              <img src="../../_static/logo.svg" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                0.20.7
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Usage</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../get_started/install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../get_started/usage.html">How to use</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../envs.html">Environments</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../envs.html#biological-environments">Biological environments</a></li>
<li class="toctree-l2"><a class="reference internal" href="../envs.html#classic-control-environments">Classic control environments</a></li>
<li class="toctree-l2"><a class="reference internal" href="../envs.html#mujoco-environments">Mujoco environments</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../envs.html#robotics-environment">Robotics environment</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="fetch_reach_cost.html">FetchReachCost gymnasium environment</a></li>
<li class="toctree-l3"><a class="reference internal" href="minitaur_bullet_cost.html">MinitaurBulletCost gymnasium environment</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">QuadXHoverCost gymnasium environment</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#cost-function">Cost function</a></li>
<li class="toctree-l4"><a class="reference internal" href="#environment-step-return">Environment step return</a></li>
<li class="toctree-l4"><a class="reference internal" href="#how-to-use">How to use</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="quadx_tracking_cost.html">QuadXTrackingCost gymnasium environment</a></li>
<li class="toctree-l3"><a class="reference internal" href="quadx_waypoints_cost.html">QuadXWaypointsCost gymnasium environment</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Development</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../dev/contributing.html">Contribute to stable-gym</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev/add_new_envs.html">Add new environments</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev/doc_dev.html">Build the documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev/license.html">License</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../autoapi/index.html">API Reference</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Stable Gym</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../envs.html">Environments</a></li>
      <li class="breadcrumb-item active">QuadXHoverCost gymnasium environment</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/rickstaa/stable-gym/blob/main/docs/source/envs/robotics/quadx_hover_cost.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section class="tex2jax_ignore mathjax_ignore" id="quadxhovercost-gymnasium-environment">
<h1>QuadXHoverCost gymnasium environment<a class="headerlink" href="#quadxhovercost-gymnasium-environment" title="Permalink to this heading"></a></h1>
<div align="center">
    <img src="https://github.com/rickstaa/stable-gym/assets/17570430/b2568886-a083-4ac9-bf91-0985b0720ae0" alt="QuadX Hover Cost environment" width="300px">
</div>
</br>
<p>An actuated multirotor unmanned aerial vehicle (UAV) in the Quad-X configuration as described by <a class="reference external" href="https://ardupilot.org/copter/docs/connect-escs-and-motors.html">ArduPilot</a> and <a class="reference external" href="https://docs.px4.io/main/en/airframes/airframe_reference.html#quadrotor-x">PX4</a>. It consists of four motors with implementations for cascaded PID controllers. This environment corresponds to the <a class="reference external" href="https://jjshoots.github.io/PyFlyt/documentation/gym_envs/quadx_envs/quadx_hover_env.html">QuadXHover-v1</a> environment included in the <a class="reference external" href="https://jjshoots.github.io/PyFlyt/index.html">PyFlyt package</a>. It is different in the fact that:</p>
<ul class="simple">
<li><p>The reward has been changed to a cost. This was done by negating the reward always to be positive definite.</p></li>
<li><p>A health penalty has been added. This penalty is applied when the quadrotor moves outside the flight dome or crashes. The penalty equals the maximum episode steps minus the steps taken or a user-defined penalty.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">max_duration_seconds</span></code> has been removed. Instead, the <code class="docutils literal notranslate"><span class="pre">max_episode_steps</span></code> parameter of the <a class="reference external" href="https://gymnasium.farama.org/api/wrappers/misc_wrappers/#gymnasium.wrappers.TimeLimit">gym.wrappers.TimeLimit</a> wrapper is used to limit the episode duration.</p></li>
</ul>
<p>The rest of the environment is the same as the original QuadXHover environment. Below, the modified cost is described. For more information about the environment (e.g. observation space, action space, episode termination, etc.), please refer to the <a class="reference external" href="https://jjshoots.github.io/PyFlyt/index.html">PyFlyt package documentation</a>.</p>
<section id="cost-function">
<h2>Cost function<a class="headerlink" href="#cost-function" title="Permalink to this heading"></a></h2>
<p>The cost function of this environment is designed in such a way that it tries to minimize the Euclidean distance error between the quadrotors’ current position and a desired hover position (i.e. <span class="math notranslate nohighlight">\(p=x_{x,y,z}=[0,0,1]\)</span>) and the error between the quadrotors’ current angular roll and pitch and their zero values. A health penalty can also be included in the cost. This health penalty is added when the drone leaves the flight dome or crashes. It equals the <code class="docutils literal notranslate"><span class="pre">max_episode_steps</span></code> minus the number of steps taken in the episode or a fixed value. The cost is computed as:</p>
<div class="math notranslate nohighlight">
\[
cost = \| p_{drone} - p_{hover} \| + \| \theta_{roll,pitch} \| + p_{health}
\]</div>
<p>Where:</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(p_{drone}\)</span> - is the current quadrotor position (i.e. x,y,z).</p></li>
<li><p><span class="math notranslate nohighlight">\(p_{hover}\)</span> - is the desired hover position (i.e. x,y,z).</p></li>
<li><p><span class="math notranslate nohighlight">\(\theta_{roll,pitch}\)</span> - is the current quadrotor roll and pitch.</p></li>
<li><p><span class="math notranslate nohighlight">\(p_{health}\)</span> is a penalty for being unhealthy (i.e. if the Quadrotor moves outside the flight dome or crashes).</p></li>
</ul>
<p>The health penalty is optional and can be disabled using the <code class="docutils literal notranslate"><span class="pre">include_health_penalty</span></code> environment arguments.</p>
</section>
<section id="environment-step-return">
<h2>Environment step return<a class="headerlink" href="#environment-step-return" title="Permalink to this heading"></a></h2>
<p>In addition to the observations, the cost and a termination and truncation boolean, the environment also returns an info dictionary:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">observation</span><span class="p">,</span> <span class="n">cost</span><span class="p">,</span> <span class="n">termination</span><span class="p">,</span> <span class="n">truncation</span><span class="p">,</span> <span class="n">info_dict</span><span class="p">]</span>
</pre></div>
</div>
<p>Compared to the original <a class="reference external" href="https://jjshoots.github.io/PyFlyt/documentation/gym_envs/quadx_envs/quadx_hover_env.html">QuadXHover-v1</a> environment, the following keys were added to this info dictionary:</p>
<ul class="simple">
<li><p><strong>reference</strong>: The reference that the quadrotor is tracking (i.e. the desired hover position <span class="math notranslate nohighlight">\(p=x_{x,y,z}=[0,0,1]\)</span>).</p></li>
<li><p><strong>state_of_interest</strong>: The state that should track the reference (SOI).</p></li>
<li><p><strong>reference_error</strong>: The error between SOI and the reference.</p></li>
</ul>
</section>
<section id="how-to-use">
<h2>How to use<a class="headerlink" href="#how-to-use" title="Permalink to this heading"></a></h2>
<p>This environment is part of the <a class="reference external" href="https://github.com/rickstaa/stable-gym">Stable Gym package</a>. It is therefore registered as the <code class="docutils literal notranslate"><span class="pre">stable_gym:QuadXHoverCost-v1</span></code> gymnasium environment when you import the Stable Gym package. If you want to use the environment in stand-alone mode, you can register it yourself.</p>
</section>
</section>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This environment is new and has not been thoroughly tested. As a result it may contain bugs
and the cost function might be updated in the future.</p>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="minitaur_bullet_cost.html" class="btn btn-neutral float-left" title="MinitaurBulletCost gymnasium environment" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="quadx_tracking_cost.html" class="btn btn-neutral float-right" title="QuadXTrackingCost gymnasium environment" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Rick Staa.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>