<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>HumanoidCost gymnasium environment &mdash; Stable Gym 0.20.7 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css?v=eafc0fe6" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/modify.css?v=519ed47b" />

  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js?v=068042d4"></script>
        <script src="../../_static/doctools.js?v=888ff710"></script>
        <script src="../../_static/sphinx_highlight.js?v=4825356b"></script>
        <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
        <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="SwimmerCost gymnasium environment" href="swimmer_cost.html" />
    <link rel="prev" title="HopperCost gymnasium environment" href="hopper_cost.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html">
            
              <img src="../../_static/logo.svg" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                0.20.7
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Usage</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../get_started/install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../get_started/usage.html">How to use</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../envs.html">Environments</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../envs.html#biological-environments">Biological environments</a></li>
<li class="toctree-l2"><a class="reference internal" href="../envs.html#classic-control-environments">Classic control environments</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../envs.html#mujoco-environments">Mujoco environments</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="ant_cost.html">AntCost gymnasium environment</a></li>
<li class="toctree-l3"><a class="reference internal" href="half_cheetah_cost.html">HalfCheetahCost gymnasium environment</a></li>
<li class="toctree-l3"><a class="reference internal" href="hopper_cost.html">HopperCost gymnasium environment</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">HumanoidCost gymnasium environment</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#observation-space">Observation space</a></li>
<li class="toctree-l4"><a class="reference internal" href="#cost-function">Cost function</a></li>
<li class="toctree-l4"><a class="reference internal" href="#environment-step-return">Environment step return</a></li>
<li class="toctree-l4"><a class="reference internal" href="#how-to-use">How to use</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="swimmer_cost.html">SwimmerCost gymnasium environment</a></li>
<li class="toctree-l3"><a class="reference internal" href="walker2d_cost.html">Walker2dCost gymnasium environment</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../envs.html#robotics-environment">Robotics environment</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Development</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../dev/contributing.html">Contribute to stable-gym</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev/add_new_envs.html">Add new environments</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev/doc_dev.html">Build the documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev/license.html">License</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../autoapi/index.html">API Reference</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Stable Gym</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../envs.html">Environments</a></li>
      <li class="breadcrumb-item active">HumanoidCost gymnasium environment</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/rickstaa/stable-gym/blob/main/docs/source/envs/mujoco/humanoid_cost.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section class="tex2jax_ignore mathjax_ignore" id="humanoidcost-gymnasium-environment">
<h1>HumanoidCost gymnasium environment<a class="headerlink" href="#humanoidcost-gymnasium-environment" title="Permalink to this heading"></a></h1>
<div align="center">
    <img src="https://github.com/rickstaa/stable-gym/assets/17570430/7b3dd9c8-065c-40ab-bedd-d6c56633b4f7" alt="Humanoid Cost environment" width="200px">
</div>
</br>
<p>An actuated 17-jointed humanoid. This environment corresponds to the <a class="reference external" href="https://gymnasium.farama.org/environments/mujoco/humanoid">Humanoid-v4</a> environment included in the <a class="reference external" href="https://gymnasium.farama.org/">gymnasium package</a>. It is different in the fact that:</p>
<ul class="simple">
<li><p>The objective was changed to a velocity-tracking task. To do this, the reward is replaced with a cost. This cost is the squared
difference between the Humanoid’s forward velocity and a reference value (error).</p></li>
<li><p>Three <strong>optional</strong> variables were added to the observation space; The reference velocity, the reference error (i.e. the difference between the humanoid’s forward velocity and the reference) and the humanoid’s forward velocity. These variables can be enabled using the <code class="docutils literal notranslate"><span class="pre">exclude_reference_from_observation</span></code>, <code class="docutils literal notranslate"><span class="pre">exclude_reference_error_from_observation</span></code> and <code class="docutils literal notranslate"><span class="pre">exclude_velocity_from_observation</span></code> environment arguments.</p></li>
</ul>
<p>The rest of the environment is the same as the original Humanoid environment. Below, the modified cost is described. For more information about the environment (e.g. observation space, action space, episode termination, etc.), please refer to the <a class="reference external" href="https://gymnasium.farama.org/environments/mujoco/humanoid/">gymnasium library</a>.</p>
<section id="observation-space">
<h2>Observation space<a class="headerlink" href="#observation-space" title="Permalink to this heading"></a></h2>
<p>The original observation space of the <a class="reference external" href="https://gymnasium.farama.org/environments/mujoco/humanoid">Humanoid-v4</a> environment contains all eight motors’ angles, velocities and torques. In this modified version, the observation space has been extended to add three additional observations:</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(r\)</span>: The velocity reference signal that needs to be tracked.</p></li>
<li><p><span class="math notranslate nohighlight">\(r_{error}\)</span>: The difference between the current and reference velocities.</p></li>
<li><p><span class="math notranslate nohighlight">\(v_{x}\)</span>: The Humanoid’s forward velocity.</p></li>
</ul>
<p>These observations <strong>optional</strong> and can be excluded from the observation space by setting the <code class="docutils literal notranslate"><span class="pre">exclude_reference_from_observation</span></code>, <code class="docutils literal notranslate"><span class="pre">exclude_reference_error_from_observation</span></code> and <code class="docutils literal notranslate"><span class="pre">exclude_x_velocity_from_observation</span></code> environment arguments to <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
</section>
<section id="cost-function">
<h2>Cost function<a class="headerlink" href="#cost-function" title="Permalink to this heading"></a></h2>
<p>The cost function of this environment is designed in such a way that it tries to minimize the error between the Humanoid’s forward velocity and a reference value. The cost function is defined as:</p>
<div class="math notranslate nohighlight">
\[
cost = w_{forward\_velocity} \times (x_{velocity} - x_{reference\_x\_velocity})^2 + w_{ctrl} \times c_{ctrl} + p_{health}
\]</div>
<p>Where:</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(w_{forward\_velocity}\)</span> - is the weight of the forward velocity error.</p></li>
<li><p><span class="math notranslate nohighlight">\(x_{velocity}\)</span> - is the 2D humanoid’s forward velocity.</p></li>
<li><p><span class="math notranslate nohighlight">\(x_{reference\_x\_velocity}\)</span> is the reference forward velocity.</p></li>
<li><p><span class="math notranslate nohighlight">\(w_{ctrl}\)</span> is the weight of the control cost (<strong>optional</strong>).</p></li>
<li><p><span class="math notranslate nohighlight">\(c_{ctrl}\)</span> is the control cost (<strong>optional</strong>).</p></li>
<li><p><span class="math notranslate nohighlight">\(p_{health}\)</span> is a penalty for being unhealthy (i.e. if the 2D humanoid falls over).</p></li>
</ul>
<p>The control and health penalty are optional and can be disabled using the <code class="docutils literal notranslate"><span class="pre">include_ctrl_cost</span></code> and <code class="docutils literal notranslate"><span class="pre">include_health_penalty</span></code> environment arguments.</p>
</section>
<section id="environment-step-return">
<h2>Environment step return<a class="headerlink" href="#environment-step-return" title="Permalink to this heading"></a></h2>
<p>In addition to the observations, the cost and a termination and truncation boolean, the environment also returns an info dictionary:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">observation</span><span class="p">,</span> <span class="n">cost</span><span class="p">,</span> <span class="n">termination</span><span class="p">,</span> <span class="n">truncation</span><span class="p">,</span> <span class="n">info_dict</span><span class="p">]</span>
</pre></div>
</div>
<p>Compared to the original <a class="reference external" href="https://gymnasium.farama.org/environments/mujoco/humanoid">Humanoid-v4</a> environment, the following keys were added to this info dictionary:</p>
<ul class="simple">
<li><p><strong>reference</strong>: The reference velocity.</p></li>
<li><p><strong>state_of_interest</strong>: The state that should track the reference (SOI).</p></li>
<li><p><strong>reference_error</strong>: The error between SOI and the reference.</p></li>
</ul>
</section>
<section id="how-to-use">
<h2>How to use<a class="headerlink" href="#how-to-use" title="Permalink to this heading"></a></h2>
<p>This environment is part of the <a class="reference external" href="https://github.com/rickstaa/stable-gym">Stable Gym package</a>. It is therefore registered as the <code class="docutils literal notranslate"><span class="pre">stable_gym:HumanoidCost-v1</span></code> gymnasium environment when you import the Stable Gym package. If you want to use the environment in stand-alone mode, you can register it yourself.</p>
</section>
</section>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This environment is new and has not been thoroughly tested. As a result it may contain bugs
and the cost function might be updated in the future.</p>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="hopper_cost.html" class="btn btn-neutral float-left" title="HopperCost gymnasium environment" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="swimmer_cost.html" class="btn btn-neutral float-right" title="SwimmerCost gymnasium environment" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Rick Staa.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>